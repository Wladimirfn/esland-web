<%- include('../partials/header') %>

<section>
  <h2>Marketplace de proveedores industriales</h2>
  <p>üìå Pega aqu√≠ tu HTML/CSS del Home y del buscador. Esta plantilla solo marca la estructura EJS.</p>

  <form method="get" action="/" class="filters">
    <input type="text" name="q" value="<%= filters.query %>" placeholder="Buscar por texto..." />
    <select name="category">
      <option value="">Todas las categor√≠as</option>
      <option value="MECANICO" <%= filters.category === 'MECANICO' ? 'selected' : '' %>>Mec√°nico</option>
      <option value="ELECTRICO" <%= filters.category === 'ELECTRICO' ? 'selected' : '' %>>El√©ctrico</option>
      <option value="REFRIGERACION" <%= filters.category === 'REFRIGERACION' ? 'selected' : '' %>>Refrigeraci√≥n</option>
    </select>
    <select name="sort">
      <option value="rating_desc" <%= filters.sort === 'rating_desc' ? 'selected' : '' %>>Rating mayor a menor</option>
      <option value="rating_asc" <%= filters.sort === 'rating_asc' ? 'selected' : '' %>>Rating menor a mayor</option>
    </select>
    <button type="submit">Filtrar</button>
  </form>
</section>

<section class="grid">
  <% providers.forEach(provider => { %>
    <article class="card">
      <h3><a href="/providers/<%= provider.id %>"><%= provider.companyName %></a></h3>
      <p>Categor√≠a: <%= provider.category %></p>
      <p>Verificado: <%= provider.verified ? 'S√≠' : 'No' %></p>
      <p>Rating: <%= provider.ratingAvg.toFixed(1) %> (<%= provider.reviewCount %> rese√±as)</p>
      <p>Plan: <%= provider.plan %> <%= provider.featured ? '‚≠ê Destacado' : '' %></p>
      <p><%= provider.description %></p>
    </article>
  <% }) %>
</section>

<%- include('../partials/footer') %>
